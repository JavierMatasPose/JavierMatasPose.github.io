<!-- Maintain existing a11y script -->
<script src="/js/a11y.js" defer></script>

<!-- DEBUG: Verify Footer Load -->
<script>console.log("ðŸš€ Custom Footer Loaded: Motion Scripts Active");</script>

<!-- Lenis Smooth Scroll -->
<script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>
<script>
  // 1. Initialize Lenis
  try {
      const lenis = new Lenis({
        duration: 1.2,
        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)), 
        smoothWheel: true,
      });

      function raf(time) {
        lenis.raf(time);
        requestAnimationFrame(raf);
      }
      requestAnimationFrame(raf);
      console.log("âœ… Lenis Initialized");
  } catch (e) {
      console.error("âŒ Lenis Failed:", e);
  }

  // 2. Scroll Logic
  window.addEventListener('scroll', () => {
    document.documentElement.style.setProperty('--scroll-y', window.scrollY + 'px');
  });

  // 3. Intersection Observer
  document.addEventListener('DOMContentLoaded', () => {
    console.log("DOM Content Loaded - Setting up Observers");
    
    const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' };
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          console.log("Revealing:", entry.target.className);
          entry.target.classList.add('is-visible');
          
          if (entry.target.classList.contains('journey-section')) {
               const line = entry.target.querySelector('.journey-line');
               if(line) line.classList.add('is-visible');
          }
        }
      });
    }, observerOptions);

    const hiddenElements = document.querySelectorAll('.pill, .journey-section, .poster-layout, .project-card');
    console.log("Found hidden elements:", hiddenElements.length);
    hiddenElements.forEach(el => observer.observe(el));
    
    // 4. Magnetic Buttons
    document.querySelectorAll('.project-button, .footer-cta').forEach(btn => {
      btn.addEventListener('mousemove', (e) => {
        const rect = btn.getBoundingClientRect();
        const x = e.clientX - rect.left - rect.width / 2;
        const y = e.clientY - rect.top - rect.height / 2;
        
        btn.style.transform = `translate(${x * 0.2}px, ${y * 0.2}px)`;
      });
      
      btn.addEventListener('mouseleave', () => {
        btn.style.transform = 'translate(0, 0)';
      });
    });
    
    // 5. Custom Cursor
    const cursor = document.createElement('div');
    cursor.classList.add('custom-cursor');
    document.body.appendChild(cursor);
    
    document.addEventListener('mousemove', (e) => {
        cursor.style.left = e.clientX + 'px';
        cursor.style.top = e.clientY + 'px';
    });
    
    document.querySelectorAll('a, button, .project-card, input, label').forEach(el => {
      el.addEventListener('mouseenter', () => cursor.classList.add('hover'));
      el.addEventListener('mouseleave', () => cursor.classList.remove('hover'));
    });
  });
</script>
